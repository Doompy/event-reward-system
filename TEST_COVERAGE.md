# 테스트 목록 및 커버리지

본 문서는 이벤트-보상 시스템의 테스트 범위와 구현 현황을 정리한 것입니다.

## 인증 모듈 (Auth)

### AuthService
- [x] 기본 기능
  - 서비스가 정의되어야 함
- [x] 사용자 생성 기능
  - 새 사용자를 생성해야 함
  - 이미 존재하는 이메일이면 ConflictException을 발생시켜야 함
- [x] 로그인 기능
  - 올바른 인증 정보로 성공적으로 로그인해야 함
  - 사용자를 찾을 수 없을 때 UnauthorizedException을 발생시켜야 함
  - 비밀번호가 일치하지 않을 때 UnauthorizedException을 발생시켜야 함
- [x] 토큰 관리
  - 유효한 토큰을 검증해야 함
  - 토큰이 유효하지 않을 때 isValid가 false여야 함
- [x] 사용자 권한 관리
  - 관리자가 사용자 역할을 업데이트할 수 있어야 함
  - 관리자가 아닌 사용자가 역할을 업데이트하려 할 때 ForbiddenException을 발생시켜야 함
  - 존재하지 않는 사용자의 역할을 업데이트하려 할 때 NotFoundException을 발생시켜야 함

### AuthController
- [x] 기본 기능
  - 컨트롤러가 정의되어야 함
- [x] 사용자 관리
  - 새 사용자를 성공적으로 생성해야 함
  - 사용자 생성 시 오류를 처리해야 함
  - 모든 사용자를 반환해야 함
  - 사용자 역할을 반환해야 함
  - 사용자 역할이 성공적으로 업데이트되어야 함
- [x] 인증 관리
  - 사용자 로그인이 성공적으로 이루어져야 함
  - 토큰이 유효할 때 성공적으로 검증해야 함
  - 유효하지 않은 토큰에 대해 invalid를 반환해야 함
  - 토큰 갱신이 성공적으로 이루어져야 함
  - 토큰 취소가 성공적으로 이루어져야 함

## 게이트웨이 모듈 (Gateway)

### JwtAuthGuard
- [x] 기본 기능
  - 정의되어 있어야 함
- [x] 인증 확인
  - Public 경로에 대해 true를 반환해야 함
  - 토큰이 유효할 때 true를 반환해야 함
  - Auth 서비스 검증 실패 시 로컬 JWT 검증을 사용해야 함
- [x] 예외 처리
  - JWT 검증 실패 시 UnauthorizedException을 발생시켜야 함
  - 토큰이 제공되지 않을 때 UnauthorizedException을 발생시켜야 함
  - 토큰 타입이 Bearer가 아닐 때 UnauthorizedException을 발생시켜야 함
  - 토큰이 유효하지 않을 때 UnauthorizedException을 발생시켜야 함

### RolesGuard
- [x] 기본 기능
  - 정의되어야 함
- [x] 권한 확인
  - 필요한 역할이 없을 때 true를 반환해야 함
  - 사용자가 필요한 역할을 가질 때 true를 반환해야 함
  - 사용자가 필요한 역할을 가지지 않을 때 ForbiddenException을 발생시켜야 함
  - 요청에 사용자가 없을 때 UnauthorizedException을 발생시켜야 함

## 이벤트 모듈 (Events)

### EventsController
- [x] 기본 기능
  - 컨트롤러가 정의되어야 함
- [x] 이벤트 관리
  - 이벤트 배열을 반환해야 함
  - 활성화된 이벤트를 반환해야 함
  - ID로 이벤트를 반환해야 함
  - 이벤트를 생성해야 함
  - 이벤트를 업데이트해야 함
- [x] 오류 처리
  - 오류를 처리해야 함
  - 이벤트를 찾을 수 없을 때 오류를 처리해야 함
  - 생성 오류를 처리해야 함
  - 업데이트 오류를 처리해야 함
- [x] 보상 관리
  - 이벤트 ID로 보상을 반환해야 함
  - ID로 보상을 찾아야 함
  - 이벤트에 대한 보상을 생성해야 함
  - 보상을 업데이트해야 함
  - 보상을 찾을 때 오류를 처리해야 함
- [x] 보상 요청 관리
  - 보상 요청을 생성해야 함
  - 보상 요청을 업데이트해야 함
  - 관리자를 위해 ID로 보상 요청을 반환해야 함
  - 요청 소유자를 위해 ID로 보상 요청을 반환해야 함
  - 일반 사용자가 다른 사람의 요청에 접근할 때 금지 오류를 발생시켜야 함
  - 사용자 보상 요청을 반환해야 함
  - 운영자를 위해 모든 보상 요청을 반환해야 함
  - 사용자 보상을 반환해야 함
  - 사용자 보상을 찾을 때 오류를 처리해야 함

### EventsService
- [x] 기본 기능
  - 정의되어야 함
- [x] 이벤트 관리
  - 새 이벤트를 생성하고 서비스 상태를 업데이트해야 함
  - 모든 이벤트를 반환하고 서비스 상태를 업데이트해야 함
  - 활성화된 이벤트를 반환하고 서비스 상태를 업데이트해야 함
  - ID로 이벤트를 반환하고 서비스 상태를 업데이트해야 함
  - 이벤트를 업데이트하고 서비스 상태를 업데이트해야 함
- [x] 오류 처리
  - 오류를 처리하고 서비스 상태를 업데이트해야 함
  - 모든 이벤트를 찾을 때 오류를 처리해야 함
  - 활성화된 이벤트를 찾을 때 오류를 처리해야 함
  - ID로 이벤트를 찾을 때 오류를 처리해야 함
- [x] 보상 관리
  - 보상을 생성하고 서비스 상태를 업데이트해야 함
  - 이벤트 ID로 보상을 찾고 서비스 상태를 업데이트해야 함
  - ID로 보상을 찾고 서비스 상태를 업데이트해야 함
- [x] 보상 요청 관리
  - 보상 요청을 생성하고 서비스 상태를 업데이트해야 함
  - 보상 요청을 업데이트하고 서비스 상태를 업데이트해야 함
  - ID로 보상 요청을 찾고 서비스 상태를 업데이트해야 함
  - 사용자 ID로 보상을 반환하고 서비스 상태를 업데이트해야 함
  - 사용자 ID로 보상 요청을 찾고 서비스 상태를 업데이트해야 함
  - 모든 보상 요청을 찾고 서비스 상태를 업데이트해야 함

## 통합 테스트

### 인증 통합 테스트 (auth-integration.spec.ts)
- [x] 인증 전체 프로세스가 정상적으로 작동하는지 확인
- [x] 사용자 등록부터 로그인, 토큰 검증, 역할 관리까지 전체 흐름 검증

### 이벤트 통합 테스트 (event-integration.spec.ts)
- [x] 이벤트 생성부터 참여, 보상 처리까지 전체 흐름 검증

## 참여 서비스 테스트 (participation.service.spec.ts)
- [x] 이벤트 참여 서비스 기능 검증
- [x] 참여 조건 확인 및 처리 기능 테스트

## 보상 요청 테스트 (reward-request.spec.ts)
- [x] 보상 요청 생성 및 관리 기능 테스트
- [x] 요청 상태 변경 및 보상 지급 프로세스 검증